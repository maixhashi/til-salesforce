# Salesforceでカスタムオブジェクトを作成する際のフローチャート

## What's this file?
> [!NOTE]
> **How**
> 
> どのようにSalesforceでカスタムオブジェクトを作成するかについて記載しています。

## Conclusion (忙しいとき向け)
> [!IMPORTANT]
> **How** : どのようにSalesforceでカスタムオブジェクトを作成するか
> 
> **Answer** : オブジェクトマネージャから作成 → 基本設定 → 項目作成 → リレーション設定 → タブ作成 → 権限設定の順で進める

## 目次

<details>
<summary>目次を開く</summary>

- [カスタムオブジェクト作成の全体フロー](#カスタムオブジェクト作成の全体フロー)
- [ステップ1: 事前準備](#ステップ1-事前準備)
- [ステップ2: オブジェクトの作成](#ステップ2-オブジェクトの作成)
- [ステップ3: カスタム項目の追加](#ステップ3-カスタム項目の追加)
- [ステップ4: リレーションシップの設定](#ステップ4-リレーションシップの設定)
- [ステップ5: カスタムタブの作成](#ステップ5-カスタムタブの作成)
- [ステップ6: 権限とアクセスの設定](#ステップ6-権限とアクセスの設定)
- [作成時の注意点](#作成時の注意点)

</details>

## カスタムオブジェクト作成の全体フロー

```mermaid
flowchart TD
    Start([開始]) --> A[事前準備]
    A --> B{要件定義完了?}
    B -->|No| A
    B -->|Yes| C[設定 → オブジェクトマネージャ]
    C --> D[作成 → カスタムオブジェクト]
    D --> E[基本情報入力]
    E --> F{項目追加必要?}
    F -->|Yes| G[カスタム項目作成]
    G --> H{さらに項目必要?}
    H -->|Yes| G
    H -->|No| I{リレーション必要?}
    F -->|No| I
    I -->|Yes| J[リレーションシップ設定]
    I -->|No| K[カスタムタブ作成]
    J --> K
    K --> L[アプリケーションに追加]
    L --> M[権限セット/プロファイル設定]
    M --> N{テスト完了?}
    N -->|No| O[設定修正]
    O --> N
    N -->|Yes| End([完了])
    
    style Start fill:#e1f5fe
    style End fill:#c8e6c9
    style B fill:#fff9c4
    style F fill:#fff9c4
    style H fill:#fff9c4
    style I fill:#fff9c4
    style N fill:#fff9c4
```

## ステップ1: 事前準備

### 要件定義のチェックリスト
- [ ] オブジェクトの目的と用途を明確化
- [ ] 必要な項目をリストアップ
- [ ] 他オブジェクトとの関係性を整理
- [ ] データ型の決定
- [ ] 命名規則の確認

## ステップ2: オブジェクトの作成

### 作成手順
1. **設定** → **オブジェクトマネージャー**を選択
2. **作成** → **カスタムオブジェクト**をクリック
3. 以下の基本情報を入力：

| 項目 | 説明 | 例 |
|------|------|-----|
| 表示ラベル | UIに表示される名前 | プロジェクト |
| 表示ラベル（複数形） | 複数形の表示名 | プロジェクト |
| オブジェクト名 | API参照名 | Project |
| レコード名 | レコードの識別名 | プロジェクト名 |
| データ型 | テキストまたは自動採番 | 自動採番 |

## ステップ3: カスタム項目の追加

```mermaid
flowchart LR
    A[項目とリレーション] --> B[新規]
    B --> C[データ型選択]
    C --> D{データ型}
    D -->|テキスト| E[文字数指定]
    D -->|数値| F[桁数・小数点指定]
    D -->|日付| G[日付形式選択]
    D -->|選択リスト| H[値の定義]
    D -->|その他| I[各種設定]
    E --> J[項目レベルセキュリティ]
    F --> J
    G --> J
    H --> J
    I --> J
    J --> K[ページレイアウト追加]
    K --> L[保存]
```

## ステップ4: リレーションシップの設定

### リレーションタイプの選択フロー

```mermaid
flowchart TD
    A[リレーション設定開始] --> B{親レコード削除時の動作}
    B -->|子も削除| C[主従関係]
    B -->|子は残す| D{親レコードは必須?}
    D -->|必須| E[参照関係（必須）]
    D -->|任意| F[参照関係（任意）]
    C --> G[関連オブジェクト選択]
    E --> G
    F --> G
    G --> H[項目名設定]
    H --> I[関連リスト設定]
    I --> J[完了]
    
    style C fill:#ffcdd2
    style E fill:#fff9c4
    style F fill:#c8e6c9
```

## ステップ5: カスタムタブの作成

### タブ作成手順
1. **設定** → **タブ**を選択
2. **カスタムオブジェクトタブ**の**新規**をクリック
3. 設定項目：
   - オブジェクトを選択
   - タブスタイル（色・アイコン）を選択
   - タブの表示設定

## ステップ6: 権限とアクセスの設定

```mermaid
flowchart LR
    A[権限設定] --> B[プロファイル]
    A --> C[権限セット]
    B --> D[オブジェクト権限]
    C --> D
    D --> E{CRUD権限}
    E --> F[作成]
    E --> G[参照]
    E --> H[編集]
    E --> I[削除]
    F --> J[項目レベルセキュリティ]
    G --> J
    H --> J
    I --> J
    J --> K[タブの表示設定]
    K --> L[保存]
```

### 権限の種類
- **作成（Create）**: 新規レコード作成
- **参照（Read）**: レコード閲覧
- **編集（Edit）**: レコード更新
- **削除（Delete）**: レコード削除
- **すべて表示**: 組織全体のレコード参照
- **すべて変更**: 組織全体のレコード編集

## 作成時の注意点

### 命名規則
- **表示ラベル**: 日本語可、わかりやすい名前
- **API名**: 英数字とアンダースコア、末尾に__cが自動付加
- **項目名**: 末尾に__cが自動付加

### ベストプラクティス
1. **項目数の制限**: 1オブジェクトあたり最大800項目
2. **リレーション数の制限**: 考慮が必要
3. **インデックスの活用**: 検索性能向上のため
4. **説明欄の活用**: 後のメンテナンスのため

### よくある落とし穴
- 権限設定の漏れ
- タブ作成の忘れ
- 関連リストの設定漏れ
- 項目レベルセキュリティの未設定

## 関連
- [Salesforce公式ドキュメント - カスタムオブジェクト](https://help.salesforce.com/s/articleView?id=sf.dev_objectcreate_task_lex.htm)
- [主従関係と参照関係の違い](./2025.08.15.08.42_what_salesforce_master_detail_vs_lookup_relationship.md)
- [カスタムタブの設定方法](./2025.08.15.08.46_how_setting_custom_tab_for_custom_object_salesforce.md)